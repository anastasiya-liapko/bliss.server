"use strict";function Form(){}function Toast(){}Form.send=function(e,t,n){t=t||{},n&&n.prop("disabled",!0),$.ajax({cache:!1,data:t,dataType:"json",method:"POST",url:e,success:function(t){if(n&&n.prop("disabled",!1),t.openModal&&$(t.openModal.id).modal({backdrop:t.openModal.backdrop||"static",keyboard:t.openModal.keyboard||!1}),t.closeModal&&$(t.closeModal.id).modal("hide"),t.removeElement&&$(t.removeElement.id).fadeOut(300,function(){$(this).remove()}),t.timer){if(t.timer.progressBar)var r=$(t.timer.progressBar.id),i=r.find("div");$(t.timer.id).countdown(t.timer.end).on("update.countdown",function(e){$(this).html(e.strftime("%M:%S")),t.timer.progressBar&&i.width((t.timer.progressBar.endAfter-e.offset.totalSeconds)*r.width()/t.timer.progressBar.endAfter)}).on("finish.countdown",function(e){$(this).html(e.strftime("00:00")),t.timer.progressBar&&i.width("100%"),t.timer.onFinish.closeModal&&$(t.timer.onFinish.closeModal.id).modal("hide"),t.timer.onFinish.openModal&&$(t.timer.onFinish.openModal.id).modal({backdrop:t.timer.onFinish.openModal.backdrop||"static",keyboard:t.timer.onFinish.openModal.keyboard||!1})})}t.message&&Toast.create(t.error,t.message[0]),t.redirect&&(window.location.href=t.redirect)},error:function(e){console.log(e),n&&n.prop("disabled",!1),Toast.create(!0,"Произошла ошибка, попробуйте ещё раз.")}})},Form.changeButtonStatus=function(e,t){e.validate().checkForm()?t.prop("disabled",!1):t.prop("disabled",!0)},Toast.create=function(e,t){if(""===t)return!1;var r=$('<div class="toast toast_active">'+t+"</div>");$("body").append(r),e?r.addClass("toast_status_error"):r.addClass("toast_status_success"),setTimeout(function(){r.remove()},4e3)},$(function(){$.validator.addMethod("passport",function(e,t){return this.optional(t)||/^\d{2}\s\d{2}\s\d{6}$/.test(e)},"Введите данные в формате 01 02 343543"),$.validator.addMethod("division_code",function(e,t){return this.optional(t)||/^\d{3}-\d{3}$/.test(e)},"Введите данные в формате 770-001"),$.validator.addMethod("phone_ru",function(e,t){return this.optional(t)||/^\+7\(\d{3}\)\d{3}-\d{2}-\d{2}$/.test(e)},"Введите номер в формате +7(xxx)xxx-xx-xx"),$.validator.addMethod("plain_text",function(e,t){return this.optional(t)||!/(<([^>]+)>)/gi.test(e)},"Поле не должно содержать HTML-теги")}),$(function(){$(".js-applicationChangeStatus").on("click",function(){var e=$(this).data("action");e&&Form.send(e)})}),$(function(){var t=$("#js-formCodeSmsInputCode"),r=$("#js-formCodeSmsInputAsterisks");t.on("keyup change",function(){r.text(t.val());var e=r.text();r.text(e.replace(/[0-9]/g,"*"))})}),$(function(){var e=$("#js-formCodeSms"),t=$("#js-formCodeSmsInputCode"),i=$("#js-formCodeSmsBtnSubmit");t.inputmask("9999",{placeholder:""}),e.validate({highlight:function(e){$(e).addClass("input_error")},unhighlight:function(e){$(e).removeClass("input_error")},submitHandler:function(e){var t=$(e).attr("action"),r=$(e).serialize();i.is(":disabled")||Form.send(t,r,i)},ignore:[],rules:{sms_code:{required:!0,number:!0,minlength:4,normalizer:function(e){return $.trim(e)}},terms:{required:!0,plain_text:!0}},messages:{sms_code:{required:"Это обязательное поле",number:"Код должен содержать только цифры",minlength:"Код должен содержать 4 символа"},terms:{required:"Ознакомьтесь с условиями",plain_text:"Поле не должно содержать HTML-теги"}},errorClass:"error-text",errorElement:"span"}),e.on("keyup keydown blur change","input, select, textarea",function(){Form.changeButtonStatus(e,i)})}),$(function(){var e=$("#js-formPhoneNumber"),t=$("#js-formPhoneNumberInputPhone"),i=$("#js-formPhoneNumberBtnSubmit");t.inputmask("+7(999)999-99-99"),e.validate({highlight:function(e){$(e).addClass("input_error")},unhighlight:function(e){$(e).removeClass("input_error")},submitHandler:function(e){var t=$(e).attr("action"),r=$(e).serialize();i.is(":disabled")||Form.send(t,r,i)},rules:{phone:{required:!0,phone_ru:!0,normalizer:function(e){return $.trim(e)}}},messages:{phone:{required:"Это обязательное поле",phone_ru:"Введите номер в формате +7(xxx)xxx-xx-xx"}},errorClass:"error-text",errorElement:"span"}),e.on("keyup blur change","input, select, textarea",function(){Form.changeButtonStatus(e,i)})}),$(function(){var e=$("#js-formProfileClient"),t=$("#js-formProfileClientInputBirthDate"),r=$("#js-formProfileClientInputPassportNumber"),i=$("#js-formProfileClientInputPassportDivisionCode"),n=$("#js-formProfileClientInputPassportIssuedDate"),a=$("#js-formProfileClientInputRegZipCode"),o=$("#js-formProfileClientInputRegCity"),s=$("#js-formProfileClientInputRegBuilding"),d=$("#js-formProfileClientInputRegStreet"),u=$("#js-formProfileClientInputRegApartment"),l=$("#js-formProfileClientInputFactZipCode"),m=$("#js-formProfileClientInputFactCity"),c=$("#js-formProfileClientInputFactBuilding"),p=$("#js-formProfileClientInputFactStreet"),f=$("#js-formProfileClientInputFactApartment"),_=$("#js-formProfileClientBtnSubmit");t.inputmask("99.99.9999"),r.inputmask("99 99 999999"),i.inputmask("999-999"),n.inputmask("99.99.9999"),a.inputmask("999999"),l.inputmask("999999"),e.validate({highlight:function(e){$(e).addClass("input_error")},unhighlight:function(e){$(e).removeClass("input_error")},submitHandler:function(e){var t=$(e).attr("action"),r=$(e).serialize();_.is(":disabled")||Form.send(t,r,_)},rules:{last_name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},first_name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},middle_name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},birth_date:{required:!0,normalizer:function(e){return $.trim(e)}},birth_place:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},passport_number:{required:!0,passport:!0,normalizer:function(e){return $.trim(e)}},passport_division_code:{required:!0,division_code:!0,normalizer:function(e){return $.trim(e)}},passport_issued_by:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},passport_issued_date:{required:!0,normalizer:function(e){return $.trim(e)}},reg_zip_code:{required:!0,number:!0,normalizer:function(e){return $.trim(e)}},reg_city:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},reg_street:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},reg_building:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},reg_apartment:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},fact_zip_code:{required:!0,number:!0,normalizer:function(e){return $.trim(e)}},fact_city:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},fact_street:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},fact_building:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},fact_apartment:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},email:{required:!0,email:!0,normalizer:function(e){return $.trim(e)}}},messages:{last_name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},first_name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},middle_name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},birth_date:{required:"Это обязательное поле"},birth_place:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},passport_number:{required:"Это обязательное поле",passport:"Введите данные в формате 01 02 343543"},passport_division_code:{required:"Это обязательное поле",division_code:"Введите данные в формате 770-001"},passport_issued_by:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},passport_issued_date:{required:"Это обязательное поле"},reg_zip_code:{required:"Это обязательное поле",number:"Индекс должен содержать только цифры"},reg_city:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},reg_street:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},reg_building:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},reg_apartment:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},fact_zip_code:{required:"Это обязательное поле",number:"Индекс должен содержать только цифры"},fact_city:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},fact_street:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},fact_building:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},fact_apartment:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},email:{required:"Это обязательное поле",email:"Введите e-mail в формате ivanov@gmail.com"}},errorClass:"error-text",errorElement:"span"}),$("#js-formProfileClientInputIsAddressMatched").on("click",function(){$(this).is(":checked")?(l.val(a.val()),m.val(o.val()),c.val(s.val()),p.val(d.val()),f.val(u.val())):(l.val(""),m.val(""),c.val(""),p.val(""),f.val(""))}),0<e.length&&setTimeout(Form.changeButtonStatus,300,e,_),e.on("keyup blur change","input, select, textarea",function(){Form.changeButtonStatus(e,_)}),t.datepicker({dateFormat:"dd.mm.yyyy",startDate:new Date(1990,0,1,0,0,0,0),maxDate:new Date}),n.datepicker({dateFormat:"dd.mm.yyyy",startDate:new Date(2010,0,1,0,0,0,0),minDate:new Date(1997,9,1,0,0,0,0),maxDate:new Date})}),$(function(){var e=$("#js-formProfileShop"),t=e.find('[name="type"]'),r=$("#js-formProfileShopInputTin"),i=$("#js-formProfileShopBtnSubmit");r.inputmask("999999999999"),e.validate({highlight:function(e){$(e).addClass("input_error")},unhighlight:function(e){$(e).removeClass("input_error")},submitHandler:function(e){var t=$(e).attr("action"),r=$(e).serialize();i.is(":disabled")||Form.send(t,r,i)},rules:{type:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},last_name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},first_name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},middle_name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},tin:{required:!0,number:!0,normalizer:function(e){return $.trim(e)}},company_name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},email:{required:!0,email:!0,normalizer:function(e){return $.trim(e)}}},messages:{type:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},last_name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},first_name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},middle_name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},tin:{required:"Это обязательное поле",number:"Номер ИНН должен содержать только цифры"},company_name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},email:{required:"Это обязательное поле",email:"Введите e-mail в формате ivanov@gmail.com"}},errorClass:"error-text",errorElement:"span"}),t.on("change",function(){"entrepreneur"===$(this).val()?r.inputmask("999999999999"):r.inputmask("9999999999")}),e.on("keyup blur change","input, select, textarea",function(){Form.changeButtonStatus(e,i)})}),$(function(){var e=$("#js-modalNoResponse");e.data("open")&&e.modal({backdrop:"static",keyboard:!1})}),$(function(){var e=$("#js-modalSendRequest");e.data("open")&&e.modal({backdrop:"static",keyboard:!1})}),$(function(){var e=$("#js-modalWaitResponse");e.data("open")&&e.modal({backdrop:"static",keyboard:!1})}),$(function(){new Swiper(".swiper-container",{slidesPerView:3,spaceBetween:30,loop:!0,breakpoints:{576:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:2}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}),$(function(){var r=$("#js-codeSmsTimer"),e=r.data("timer-end"),i=$("#js-codeSmsRepeatSend"),n=$("#js-codeSmsRepeatShow"),a=$("#js-codeSmsTimerShow");r.countdown(1e3*e).on("update.countdown",function(e){$(this).html(e.strftime("%M:%S"))}).on("finish.countdown",function(e){$(this).html(e.strftime("00:00")),i.removeClass("link_disabled"),a.fadeOut(),n.fadeIn()}),i.on("click",function(){if($(this).hasClass("link_disabled"))return!1;$.ajax({cache:!1,dataType:"json",method:"POST",url:$(this).data("link-action"),success:function(e){n.fadeOut(),a.fadeIn(),i.addClass("link_disabled"),Toast.create(e.error,e.message[0]);var t=Date.now()/1e3+180;Cookies.set("code_sms_timer",t),r.countdown(1e3*t).on("update.countdown",function(e){$(this).html(e.strftime("%M:%S"))}).on("finish.countdown",function(e){$(this).html(e.strftime("00:00")),i.removeClass("link_disabled")})},error:function(){Toast.create(!0,"Произошла ошибка, попробуйте ещё раз.")}})})}),$(function(){var e=$("#js-profileClientTimer");if(!e.data("timer-enable"))return!1;var t=e.data("timer-end"),r=$("#js-profileClientProgressBar"),i=r.find("div"),n=r.data("end-after"),a=$("#js-modalSendRequest"),o=$("#js-modalNoResponse");e.countdown(t).on("update.countdown",function(e){$(this).html(e.strftime("%M:%S")),i.width((n-e.offset.totalSeconds)*r.width()/n)}).on("finish.countdown",function(e){$(this).html(e.strftime("00:00")),i.width("100%"),a.modal("hide"),o.modal({backdrop:"static",keyboard:!1})})});
//# sourceMappingURL=main.min.js.map
