"use strict";function Form(){}function Toast(){}Form.send=function(e,r,i){r=r||{},i&&i.prop("disabled",!0),$.ajax({cache:!1,data:r,dataType:"json",method:"POST",url:e,success:function(r){if(i&&i.prop("disabled",!1),r.openModal&&$(r.openModal.id).modal({backdrop:r.openModal.backdrop||"static",keyboard:r.openModal.keyboard||!1}),r.closeModal&&$(r.closeModal.id).modal("hide"),r.removeElement&&$(r.removeElement.id).fadeOut(300,function(){$(this).remove()}),r.timer){if(r.timer.progressBar)var t=$(r.timer.progressBar.id),n=t.find("div");$(r.timer.id).countdown(r.timer.end).on("update.countdown",function(e){$(this).html(e.strftime("%M:%S")),r.timer.progressBar&&n.width((r.timer.progressBar.endAfter-e.offset.totalSeconds)*t.width()/r.timer.progressBar.endAfter)}).on("finish.countdown",function(e){$(this).html(e.strftime("00:00")),r.timer.progressBar&&n.width("100%"),r.timer.onFinish.closeModal&&$(r.timer.onFinish.closeModal.id).modal("hide"),r.timer.onFinish.openModal&&$(r.timer.onFinish.openModal.id).modal({backdrop:r.timer.onFinish.openModal.backdrop||"static",keyboard:r.timer.onFinish.openModal.keyboard||!1})})}r.message&&Toast.create(r.error,r.message[0]),r.redirect&&(window.location.href=r.redirect)},error:function(e){console.log(e),i&&i.prop("disabled",!1),Toast.create(!0,"Произошла ошибка, попробуйте ещё раз.")}})},Form.changeButtonStatus=function(e,r){e.validate().checkForm()?r.prop("disabled",!1):r.prop("disabled",!0)},Toast.create=function(e,r){if(""===r)return!1;var t=$('<div class="toast toast_active">'+r+"</div>");$("body").append(t),e?t.addClass("toast_status_error"):t.addClass("toast_status_success"),setTimeout(function(){t.remove()},4e3)},$(function(){$.validator.addMethod("passport",function(e,r){return this.optional(r)||/^\d{2}\s\d{2}\s\d{6}$/.test(e)},"Введите данные в формате 01 02 343543"),$.validator.addMethod("division_code",function(e,r){return this.optional(r)||/^\d{3}-\d{3}$/.test(e)},"Введите данные в формате 770-001"),$.validator.addMethod("phone_ru",function(e,r){return this.optional(r)||/^\+7\(\d{3}\)\d{3}-\d{2}-\d{2}$/.test(e)},"Введите номер в формате +7(xxx)xxx-xx-xx"),$.validator.addMethod("plain_text",function(e,r){return this.optional(r)||!/(<([^>]+)>)/gi.test(e)},"Поле не должно содержать HTML-теги")}),$(function(){$(".js-deleteAdmin").on("click",function(e){if(e.preventDefault(),confirm("Вы уверены, что хотите удалить пользователя?")){var r=$(this),t=r.data("action"),n={id:r.data("id"),remove_id:r.data("remove-id")};r.is(":disabled")||Form.send(t,n,r)}})}),$(function(){var e=$("#js-formAddAdmin"),r=$("#js-formAddAdminInputPhone"),n=$("#js-formAddAdminBtnSubmit");r.inputmask("+7(999)999-99-99"),e.validate({highlight:function(e){$(e).addClass("form-control_error")},unhighlight:function(e){$(e).removeClass("form-control_error")},submitHandler:function(e){var r=$(e).attr("action"),t=$(e).serialize();n.is(":disabled")||Form.send(r,t,n)},rules:{name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},email:{required:!0,email:!0,normalizer:function(e){return $.trim(e)}},phone:{required:!1,phone_ru:!0,normalizer:function(e){return $.trim(e)}},active:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}}},messages:{name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},email:{required:"Это обязательное поле",email:"Введите e-mail в формате ivanov@gmail.com"},phone:{required:"Это обязательное поле",phone_ru:"Введите номер в формате +7(xxx)xxx-xx-xx"},active:{plain_text:"Поле не должно содержать HTML-теги"}},errorClass:"form-control__error-text",errorElement:"span"}),e.on("keyup blur change","input, select, textarea",function(){Form.changeButtonStatus(e,n)})}),$(function(){var e=$("#js-formEditAdmin"),r=$("#js-formEditAdminInputPhone"),n=$("#js-formEditAdminBtnSubmit");r.inputmask("+7(999)999-99-99"),e.validate({highlight:function(e){$(e).addClass("form-control_error")},unhighlight:function(e){$(e).removeClass("form-control_error")},submitHandler:function(e){var r=$(e).attr("action"),t=$(e).serialize();n.is(":disabled")||Form.send(r,t,n)},rules:{name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},email:{required:!0,email:!0,normalizer:function(e){return $.trim(e)}},password:{required:!0,normalizer:function(e){return $.trim(e)}},phone:{required:!1,phone_ru:!0,normalizer:function(e){return $.trim(e)}},active:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}}},messages:{name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},email:{required:"Это обязательное поле",email:"Введите e-mail в формате ivanov@gmail.com"},password:{required:"Это обязательное поле"},phone:{required:"Это обязательное поле",phone_ru:"Введите номер в формате +7(xxx)xxx-xx-xx"},active:{plain_text:"Поле не должно содержать HTML-теги"}},errorClass:"form-control__error-text",errorElement:"span"}),e.on("keyup blur change","input, select, textarea",function(){Form.changeButtonStatus(e,n)})}),$(function(){var e=$("#js-formEditRequest"),n=$("#js-formEditRequestBtnSubmit");e.validate({highlight:function(e){$(e).addClass("form-control_error")},unhighlight:function(e){$(e).removeClass("form-control_error")},submitHandler:function(e){var r=$(e).attr("action"),t=$(e).serialize();n.is(":disabled")||Form.send(r,t,n)},rules:{tracking_id:{required:!1,plain_text:!0,normalizer:function(e){return $.trim(e)}}},messages:{tracking_id:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"}},errorClass:"form-control__error-text",errorElement:"span"}),e.on("keyup blur change","input, select, textarea",function(){Form.changeButtonStatus(e,n)})}),$(function(){var e=$("#js-formEditShop"),r=e.find('[name="type"]'),t=e.find('[name="type"]:checked'),n=$("#js-formEditShopInputTin"),i=$("#js-formEditShopBtnSubmit");"entrepreneur"===t.val()?n.inputmask("999999999999"):n.inputmask("9999999999"),e.validate({highlight:function(e){$(e).addClass("form-control_error")},unhighlight:function(e){$(e).removeClass("form-control_error")},submitHandler:function(e){var r=$(e).attr("action"),t=$(e).serialize();i.is(":disabled")||Form.send(r,t,i)},rules:{type:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},last_name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},first_name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},middle_name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}},tin:{required:!0,number:!0,normalizer:function(e){return $.trim(e)}},company_name:{required:!0,plain_text:!0,normalizer:function(e){return $.trim(e)}}},messages:{type:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},last_name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},first_name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},middle_name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"},tin:{required:"Это обязательное поле",number:"Номер ИНН должен содержать только цифры"},company_name:{required:"Это обязательное поле",plain_text:"Поле не должно содержать HTML-теги"}},errorClass:"form-control__error-text",errorElement:"span"}),r.on("change",function(){"entrepreneur"===$(this).val()?n.inputmask("999999999999"):n.inputmask("9999999999")}),e.on("keyup blur change","input, select, textarea",function(){Form.changeButtonStatus(e,i)})}),$(function(){var e=$("#js-formLogin"),n=$("#js-formLoginBtnSubmit");e.validate({highlight:function(e){$(e).addClass("form-control_error")},unhighlight:function(e){$(e).removeClass("form-control_error")},submitHandler:function(e){var r=$(e).attr("action"),t=$(e).serialize();n.is(":disabled")||Form.send(r,t,n)},rules:{email:{required:!0,email:!0,normalizer:function(e){return $.trim(e)}},password:{required:!0,normalizer:function(e){return $.trim(e)}}},messages:{email:{required:"Это обязательное поле",email:"Введите логин в формате ivanov@gmail.com"},password:{required:"Это обязательное поле"}},errorClass:"form-control__error-text",errorElement:"span"}),e.on("keyup blur change","input, select, textarea",function(){Form.changeButtonStatus(e,n)})}),$(function(){var e=$("#js-sideMenu");$("#js-sideMenuToggleButton").on("click",function(){e.toggleClass("side-menu_active")})}),$(function(){new Swiper("#js-sliderIntegrationPlugin",{slidesPerView:4,spaceBetween:20,loop:!0,breakpoints:{576:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:2}},navigation:{nextEl:"#js-sliderIntegrationPluginNextBtn",prevEl:"#js-sliderIntegrationPluginPrevBtn"}})});
//# sourceMappingURL=main-admin.min.js.map
